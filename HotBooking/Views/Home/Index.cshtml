@using HotBooking.Domain
@using HotBooking.Domain.Entities
@model DataManager
@{ 
    var favoriteCities = new List<City>();
    var armenianCities = new List<City>();
    var favoriteCountries = new List<Country>();

    foreach (var item in Model.Cities.GetAll())
    {
        var country = Model.Countries.GetById(item.CountryId);
        if (item.IsFavorite)
        {
            favoriteCities.Add(item);
        }
        if(country.Title == "Armenia")
        {
            armenianCities.Add(item);
        }
    }

    foreach (var item in Model.Countries.GetAll())
    {
        if (item.IsFavorite)
        {
            favoriteCountries.Add(item);
        }
    }
}
<body>
    <div class="content">
        <div class="container">
            <div class="content__column">
                <article class="article">
                    <div class="article__title title">
                        <h3>Online hotel reservation system HotBooking</h3>
                    </div>
                    <div class="article__subtitle">
                        <img src="~/images/bookingImage.jpg" alt="">
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur accusantium nesciunt iure? Officia quo hic laboriosam. In harum aperiam quia officiis, maiores et dicta obcaecati numquam beatae ipsam, quo porro? Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eum, recusandae ipsum ratione eligendi veritatis soluta placeat iure architecto optio? Repellat ipsa, magnam expedita necessitatibus illo quae laborum corrupti reiciendis incidunt! Lorem ipsum dolor sit, amet consectetur adipisicing elit. Veniam cumque voluptate cum assumenda corrupti, magni dolore, ex veritatis delectus quos, exercitationem amet enim nostrum. Alias odit dignissimos ea iusto veritatis. Lorem ipsum dolor sit, amet consectetur adipisicing elit. Corporis architecto aliquam quos facilis accusamus doloribus aut necessitatibus voluptatem libero corrupti quas nesciunt quo iure, magni, deleniti omnis cupiditate vel! Consequatur! Lorem ipsum dolor sit amet consectetur adipisicing elit. Eaque magnam aliquam repellat unde vero odit quos sint quas consequuntur corrupti veritatis alias distinctio expedita dolorem earum corporis quidem, quaerat cumque.</p>
                    </div>
                </article>

                <article class="article article_cream">
                    <div class="article__row">
                        <div class="article__text-block article__text-block_piggy">
                            <div class="article__title_2 title_2">
                                <p>Low prices</p>
                            </div>
                            <div class="text-block__description">
                                <p>Our prices are under close control as we work with thousands of hotels and dozens of providers directly. This also means that we always have great offers for most destinations.</p>
                            </div>
                        </div>
                        <div class="article__text-block article__text-block_key">
                            <div class="article__title_2 title_2">
                                <p>Hotels Worldwide</p>
                            </div>
                            <div class="text-block__description">
                                <p>We have over 1,300,000 properties around the world. This includes hotels, hostels, apartments, villas, and even campgrounds. Find suitable accommodation at any time of the year.</p>
                            </div>
                        </div>
                        <div class="article__text-block article__text-block_bars">
                            <div class="article__title_2 title_2">
                                <p>Flexible payment options</p>
                            </div>
                            <div class="text-block__description">
                                <p>You can choose a payment method. We accept all major credit cards for online payment. You can also pay upon arrival at the hotel.</p>
                            </div>
                        </div>
                        <div class="article__text-block article__text-block_phone">
                            <div class="article__title_2 title_2">
                                <p>24/7 Dedicated Customer Care Team</p>
                            </div>
                            <div class="text-block__description">
                                <p>Our customer care team is available 24/7. Our managers can help you with choosing a hotel and making a reservation, or if you need any help when traveling, they will find a solution to your problem as soon as possible.</p>
                            </div>
                        </div>
                        <div class="article__text-block article__text-block_message">
                            <div class="article__title_2 title_2">
                                <p>Reliable Reviews</p>
                            </div>
                            <div class="text-block__description">
                                <p>We collect and publish our clients' reviews, as well as reviews from TripAdvisor, to provide you with additional information about the hotel.</p>
                            </div>
                        </div>
                        <div class="article__text-block article__text-block_mobile">
                            <div class="article__title_2 title_2">
                                <p>Free App</p>
                            </div>
                            <div class="description">
                                <p>The most important thing about our app is that it shows secret offers. Plus, it is extremely handy—book hotels on the subway, at work, or even at the airport.</p>
                            </div>
                        </div>
                    </div>
                    <div class="article__logo logo logo_centered">
                        <a href="" class="logo__link">HotBooking</a>
                    </div>
                </article>

                <article class="article">
                    <div class="article__title title">
                        <h3>Favorite cities</h3>
                    </div>
                    <div class="article__row">
                        @for (int i = 0; i < 6; i++)
                        {
                            if (i == 0 || i == 5)
                            {
                                @await Html.PartialAsync("CardWithFormBigPartial", favoriteCities[i]);
                            }
                            else
                            {
                                @await Html.PartialAsync("CardWithFormPartial", favoriteCities[i]);
                            }
                        }
                    </div>
                </article>

                <article class="article">
                    <div class="article__title title">
                        <h3>Learn more</h3>
                    </div>
                    <div class="article__row article__row_polaroid">
                        @for (int i = 0; i < 5; i++)
                        {
                            @await Html.PartialAsync("PolaroidPartial", favoriteCountries[i]);
                        }
                    </div>
                </article>

                <article class="article">
                    <div class="article__title title">
                        <h3>Explore Armenia</h3>
                    </div>
                    <div class="article__row">
                        @for (int i = 0; i < 6; i++)
                        {
                            if (i == 2 || i == 3)
                            {
                                @await Html.PartialAsync("CardWithFormBigPartial", armenianCities[i]);
                            }
                            else
                            {
                                @await Html.PartialAsync("CardWithFormPartial", armenianCities[i]);
                            }
                        }
                    </div>
                </article>

                <article class="article">
                    <div class="article__title title">Latest reviews</div>
                    <div id="js-carousel-1" class="article__review review owl-carousel">
                        @foreach (var review in Model.Reviews.GetAll())
                        {
                            <div class="review__inner">
                                @{
                                    string path;
                                    User currUser = Model.UserManager.FindByIdAsync(review.UserId.ToString()).Result;
                                    if (currUser.Avatar != null && currUser.Avatar != "")
                                    {
                                        path = currUser.Avatar;
                                    }
                                    else
                                    {
                                        path = "images/icons/maleIcon.jpg";
                                    }
                                }
                                <img src="@path" alt="" class="review__avatar">
                                <div class="review__comment">
                                    <div class="title_2">
                                        <p>@currUser.UserName</p>
                                    </div>
                                    <div>
                                        <p>@review.Text</p>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </article>
            </div>
        </div>
    </div>

    <script>
        $('#js-carousel-1').owlCarousel({
            items: 1,
        });
    </script>
</body>
